'use strict';

import l from './helpers/log'

const RankedRegistry = artifacts.require('RankedRegistry.sol')

contract('RankedRegistry', function (accounts) {

  let registry

  beforeEach(async function () {
    registry = await RankedRegistry.new()
  })

  it('get dapps', async function () {
    await registry.addDappMetaTemp('0x1000000000000000000000000000000000000000000000000000000000000000', 1, "0x9100000000000000000000000000000000000000000000000000000000000000");
    await registry.addDappMetaTemp('0x2000000000000000000000000000000000000000000000000000000000000000', 2, "0x9200000000000000000000000000000000000000000000000000000000000000");
    await registry.addDappMetaTemp('0x3000000000000000000000000000000000000000000000000000000000000000', 3, "0x9300000000000000000000000000000000000000000000000000000000000000");
    await registry.addDappMetaTemp('0x4000000000000000000000000000000000000000000000000000000000000000', 4, "0x9400000000000000000000000000000000000000000000000000000000000000");

    let res = await registry.getDapps(0, 0);
    assert.equal(4, res.length);

    assert.equal(4, res[0].length);
    assert.equal('0x1000000000000000000000000000000000000000000000000000000000000000', res[0][0]);
    assert.equal(1, res[1][0]);
    assert.equal('0x9100000000000000000000000000000000000000000000000000000000000000', res[2][0]);
    assert.equal(true, res[3][0]);
    assert.equal('0x4000000000000000000000000000000000000000000000000000000000000000', res[0][3]);
    assert.equal(4, res[1][3]);
    assert.equal('0x9400000000000000000000000000000000000000000000000000000000000000', res[2][3]);
    assert.equal(true, res[3][3]);

    res = await registry.getDapps(3, 0);
    assert.equal(4, res.length);
    assert.equal(1, res[0].length);
    assert.equal('0x4000000000000000000000000000000000000000000000000000000000000000', res[0][0]);
    assert.equal(4, res[1][0]);
    assert.equal('0x9400000000000000000000000000000000000000000000000000000000000000', res[2][0]);
    assert.equal(true, res[3][0]);

    res = await registry.getDapps(3, 1);
    assert.equal(4, res.length);
    assert.equal(1, res[0].length);
    assert.equal('0x4000000000000000000000000000000000000000000000000000000000000000', res[0][0]);
    assert.equal(4, res[1][0]);
    assert.equal('0x9400000000000000000000000000000000000000000000000000000000000000', res[2][0]);
    assert.equal(true, res[3][0]);
  });



})
